/**
 * rekaf - Rekaf a fake select element
 * @version v1.0.0
 * @link http://coalescecreate.com
 * @author richard@coalescecreate.com - Coalesce Create
 * @license MIT
 */
!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window):e(jQuery,window)}(function(e,t){var s={init:function(){var e=this;e.set.initialContents=e.set.useHTML?e.find("span").first().children().clone():e.find("span").first().text(),s.checkDisabledInputs.apply(e),s.updateList.apply(e),s.enableEvents.apply(e)},checkDisabledInputs:function(){var t=this,s=t.find("input:disabled");s.length>0&&s.each(function(){e(this).closest("li").addClass(t.set.disabledClass)})},openList:function(){var t=this;t.set.useScreen?e("#rekaf-screen").show():e(".rekaf-opened").length>0&&(t.trigger("rekaf.closed"),e(".rekaf-opened").removeClass("rekaf-opened").css("z-index",t.set.zIndex).find("ul").hide()),t.addClass("rekaf-opened").css("z-index",t.set.zIndex+2).find("ul").show(),t.trigger("rekaf.opened")},closeList:function(){var t=this;t.trigger("rekaf.closed"),e(".rekaf-opened").removeClass("rekaf-opened").css("z-index",t.set.zIndex).find("ul").hide(),t.set.useScreen&&e("#rekaf-screen").hide()},updateList:function(){var t=this,s=[];if(t.find("li").each(function(){var n=e(this).text();e(this).hasClass(t.set.disabledClass)||e(this).find("."+t.set.disabledClass).length>0||(t.set.useHTML?n=e(this).find("a").length>0?e(this).find("a").children().clone():$li.children().clone().remove("input"):""===n&&void 0!==e(this).attr("title")&&(n=e(this).attr("title")),(e(this).hasClass(t.set.selectedClass)||e(this).find("."+t.set.selectedClass).length>0)&&(!t.set.multiselect&&0===s.length||t.set.multiselect?s.push(n):e(this).removeClass(t.set.selectedClass).find("."+t.set.selectedClass).removeClass(t.set.selectedClass)))}),s.length>0){if(t.set.useHTML){t.find("span").first().empty();for(var n=0;n<s.length;n++)t.find("span").first().append(s[n])}else innerText=s.length>t.set.multiselectTitleLimit?s.length+t.set.multiselectTitleLimitText:s.join(t.set.delimiter),t.set.multiselect||(innerText=s[0]),t.find("span").first().text(innerText);t.trigger("rekaf.selected",[s])}else t.set.useHTML?t.find("span").first().empty().append(t.set.initialContents):t.find("span").first().text(t.set.initialContents),t.trigger("rekaf.unselected",[])},resetList:function(){var e=this;e.find("."+e.set.selectedClass).removeClass(e.set.selectedClass),e.removeClass(e.set.selectedClass).find("span").first().text(e.set.initialContents),e.trigger("rekaf.unselected",[]),s.updateList.apply(e),s.closeList.apply(e)},enableEvents:function(){var n=this,i=null,a={move:!1};i=function(){return a.moved?!1:Math.abs(Math.abs(a.startX)-Math.abs(a.endX))<50&&Math.abs(Math.abs(a.startY)-Math.abs(a.endY))<50},e(t).on({touchstart:function(e){n.set.touch=!0,a.startX=e.originalEvent.targetTouches[0].clientX,a.startY=e.originalEvent.targetTouches[0].clientY,a.endX=e.originalEvent.targetTouches[0].clientX,a.endY=e.originalEvent.targetTouches[0].clientY,a.moved=!1},touchmove:function(e){a.endX=e.originalEvent.targetTouches[0].clientX,a.endY=e.originalEvent.targetTouches[0].clientY,i()||(a.moved=!0)}}),n.on("click","span",function(){n.hasClass("rekaf-opened")?s.closeList.apply(n):s.openList.apply(n)}),n.on("rekaf.resetSelect",function(){s.resetList.apply(n)}),n.on("click","li",function(t){var i=e(this),a=i.hasClass(n.set.selectedClass);i.find("a").length>0&&n.set.preventLinks&&t.preventDefault(),i.find("."+n.set.disabledClass).length>0||i.hasClass(n.set.disabledClass)||(i.find(".remove").length>0&&n.find("."+n.set.selectedClass).removeClass(n.set.selectedClass),n.set.multiselect===!0?i.hasClass(n.set.selectedClass)?i.removeClass(n.set.selectedClass):i.addClass(n.set.selectedClass):(n.find("."+n.set.selectedClass).removeClass(n.set.selectedClass),a&&n.set.clickRemoveSelected||i.addClass(n.set.selectedClass)),s.updateList.apply(n),s.closeList.apply(n))}),e("#rekaf-screen").on("click",function(){s.closeList.apply(n)}),n.set.useScreen||e(document).on("click touchend",function(t){if(n.hasClass("rekaf-opened")&&0===e(t.target).closest(".fake-select").length){if(n.set.touch===!0&&i()===!1)return;t.preventDefault(),s.closeList.apply(n)}})}},n={init:function(t){var n=e.extend({},i,t),a="";if(n.debug===!0){if(0===this.length)return void console.warn("No objects found for $.rekaf >>> Maybe not generated from JS yet?");a="background-color: blue; "}return 0===e("#rekaf-screen").length&&n.useScreen&&e("body").prepend('<div id="rekaf-screen" style="position: fixed; top: 0; left: 0; '+a+"width: 100%; height: 2000px; z-index: "+(n.zIndex+1)+'; display: none;"></div>'),this.each(function(){var t=e(this),i=t.data();t.set=e.extend({},n,i),t.set.debug===!0&&(console.warn(":::: Rekaf Debug has been set to true ::::"),console.log("Options -> ",t.set)),t.set.preventInlineStyles===!1&&t.css({"z-index":t.set.zIndex,position:"relative"}),t.set.rekafIntiated?t.set.debug===!0&&console.warn(":::: You are re-running REKAF!!! It is only intended to be run once, try update. ::::"):s.init.apply(t),t.set.rekafIntiated=!0,t.data(t.set)})},open:function(t){var n=e.extend({},i,t);return this.each(function(){var t=e(this),i=t.data();t.set=e.extend({},n,i),s.openList.apply(t)})},update:function(t){var n=e.extend({},i,t);return this.each(function(){var t=e(this),i=t.data();t.set=e.extend({},n,i),s.updateList.apply(t)})},reset:function(t){var n=e.extend({},i,t);return this.each(function(){var t=e(this),i=t.data();t.set=e.extend({},n,i),s.resetList.apply(t)})}},i={zIndex:1500,mulitselect:!1,useScreen:!0,useHTML:!1,touch:!1,clickRemoveSelected:!1,initialContents:"",disabledClass:"disabled",selectedClass:"selected",multiselectTitleLimit:4,multiselectTitleLimitText:" items selected",delimiter:", ",preventLinks:!0,preventInlineStyles:!1,debug:!1};e.fn.rekaf=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.rekaf"):n.init.apply(this,arguments)}});