/**
 * ys-rekaf - Rekaf a fake select element
 * @version v0.8.0
 * @link http://youngskilled.com
 * @author richard@youngskilled.com Young/Skilled
 * @license MIT
 */
!function(e,t){var s={init:function(){var e=this;s.enableEvents.apply(e),s.checkInputs.apply(e)},checkInputs:function(){var t=this,s=t.find("input:checked"),i=t.find("input:disabled"),n=s.closest("li"),a="";s.length>0&&(a=n.text(),""===a&&void 0!==n.attr("title")&&(a=n.attr("title")),t.find("."+t.set.selectedClass).removeClass(t.set.selectedClass),n.addClass(t.set.selectedClass),t.addClass(t.set.selectedClass).find("span").first().text(a),t.trigger("rekaf.selected",[a])),i.length>0&&i.each(function(){e(this).closest("li").addClass("disabled")})},openList:function(){var t=this;t.addClass("rekaf-opened").css("z-index",t.set.zIndex+2).find("ul").show(),t.set.useScreen&&e("#rekaf-screen").show()},closeList:function(){var t=this;e(".rekaf-opened").removeClass("rekaf-opened").css("z-index",t.set.zIndex).find("ul").hide(),t.set.useScreen&&e("#rekaf-screen").hide()},updateList:function(){var t=this,s="",i=t.data("textList")||[];t.find("li").each(function(){var s=e(this).text(),n=null;""===s&&void 0!==e(this).attr("title")&&(s=e(this).attr("title"));for(var a=0;a<i.length;a++)if(s===i[a]){n=a;break}e(this).hasClass(t.set.selectedClass)?null===n&&(t.set.debug===!0&&console.log("textList, currentItem, inListAtIndex push item",i,s,n),i.push(s)):null!==n&&(t.set.debug===!0&&console.log("textList, currentItem, inListAtIndex splice item",i,s,n),i.splice(n,1))}),i.length>0?t.set.multiselect?(s=i.length>t.set.multiselectTitleLimit?i.length+t.set.multiselectTitleLimitText:i.join(t.set.delimiter),t.find("span").first().text(s),t.trigger("rekaf.selected",[i])):(t.find("span").first().text(i[0]),t.trigger("rekaf.selected",[i])):(t.find("span").first().text(t.find("span").first().data("orig-text")),t.trigger("rekaf.unselected",[i])),t.data("textList",i)},resetList:function(){var e=this,t="";e.find("."+e.set.selectedClass).removeClass(e.set.selectedClass),e.removeClass(e.set.selectedClass).find("span").first().removeClass(e.set.selectedClass).text(e.find("span").first().data("orig-text")),e.trigger("rekaf.unselected",[t]),e.data("textList",[]),s.closeList.apply(e)},enableEvents:function(){var i=this,n=null,a={move:!1};n=function(){return a.moved?!1:Math.abs(Math.abs(a.startX)-Math.abs(a.endX))<50&&Math.abs(Math.abs(a.startY)-Math.abs(a.endY))<50},e(t).on({touchstart:function(e){i.set.touch=!0,a.startX=e.originalEvent.targetTouches[0].clientX,a.startY=e.originalEvent.targetTouches[0].clientY,a.endX=e.originalEvent.targetTouches[0].clientX,a.endY=e.originalEvent.targetTouches[0].clientY,a.moved=!1},touchmove:function(e){a.endX=e.originalEvent.targetTouches[0].clientX,a.endY=e.originalEvent.targetTouches[0].clientY,n()||(a.moved=!0)}}),i.on("click","span",function(){i.hasClass("rekaf-opened")?s.closeList.apply(i):s.openList.apply(i)}),i.on("rekaf.resetSelect",function(){s.resetList.apply(i)}),i.on("click touchend","li",function(t){if(i.set.touch!==!0||n()!==!1){var a=e(this),l=i.data("textList")||[],r=a.hasClass(i.set.selectedClass),d=a.text();if(""===d&&void 0!==a.attr("title")&&(d=a.attr("title")),a.find("a").length>0&&i.set.preventLinks&&t.preventDefault(),!(a.find("."+i.set.disabledClass).length>0||a.hasClass(i.set.disabledClass))){if(a.find(".remove").length>0&&i.removeClass(i.set.selectedClass),i.set.multiselect===!0){if(a.hasClass("clear-select")||a.find(".remove").length>0)i.find("."+i.set.selectedClass).removeClass(i.set.selectedClass),l=[],text="";else{if(a.hasClass(i.set.selectedClass)){a.removeClass(i.set.selectedClass);for(var c=0;c<l.length;c++)if(l[c]===d){l.splice(c,1);break}}else a.addClass(i.set.selectedClass),l.push(d);text=l.length>i.set.multiselectTitleLimit?l.length+i.set.multiselectTitleLimitText:l.join(i.set.delimiter)}l.length>0?(i.addClass(i.set.selectedClass).find("span").first().addClass(i.set.selectedClass).text(text),i.trigger("rekaf.selected",[text])):(i.removeClass(i.set.selectedClass).find("span").first().removeClass(i.set.selectedClass).text(i.find("span").first().data("orig-text")),i.trigger("rekaf.unselected",[text]))}else l[0]=d,i.find("."+i.set.selectedClass).removeClass(i.set.selectedClass),r&&i.set.clickRemoveSelected?(i.removeClass(i.set.selectedClass).find("span").first().text(i.find("span").first().data("orig-text")),i.trigger("rekaf.unselected",[l])):(a.addClass(i.set.selectedClass),i.addClass(i.set.selectedClass).find("span").first().text(l[0]),i.trigger("rekaf.selected",[l]));i.data("textList",l),s.closeList.apply(i)}}}),e("#rekaf-screen").on("click",function(){s.closeList.apply(i)}),i.set.useScreen||e(document).on("click touchend",function(t){if(i.hasClass("rekaf-opened")&&0===e(t.target).closest(".fake-select").length){if(i.set.touch===!0&&n()===!1)return;t.preventDefault(),s.closeList.apply(i)}})}},i={init:function(t){var i=e.extend({},n,t),a="";if(i.debug===!0){if(0===this.length)return void console.warn("No objects found for $.rekaf >>> Maybe not generated from JS yet?");a="background-color: blue; "}return 0===e("#rekaf-screen").length&&i.useScreen&&e("body").prepend('<div id="rekaf-screen" style="position: fixed; top: 0; left: 0; '+a+"width: 100%; height: 2000px; z-index: "+(i.zIndex+1)+'; display: none;"></div>'),this.each(function(){var t=e(this),n=t.data();t.set=e.extend({},i,n),t.set.debug===!0&&(console.warn(":::: YS Filter Debug has been set to true ::::"),console.log("Options -> ",t.set)),t.css({"z-index":t.set.zIndex,position:"relative"}),t.set.rekafIntiated?t.set.debug===!0&&console.warn(":::: You are re-running REKAF!!! It is only intended to be run once, try update. ::::"):s.init.apply(t),t.set.rekafIntiated=!0,t.data(t.set)})},open:function(t){var i=e.extend({},n,t);return this.each(function(){var t=e(this),n=t.data();t.set=e.extend({},i,n),s.openList.apply(t)})},update:function(t){var i=e.extend({},n,t);return this.each(function(){var t=e(this),n=t.data();t.set=e.extend({},i,n),s.updateList.apply(t)})},reset:function(t){var i=e.extend({},n,t);return this.each(function(){var t=e(this),n=t.data();t.set=e.extend({},i,n),s.resetList.apply(t)})}},n={zIndex:1500,mulitselect:!1,useScreen:!0,touch:!1,clickRemoveSelected:!1,disabledClass:"disabled",selectedClass:"selected",multiselectTitleLimit:4,multiselectTitleLimitText:" items selected",delimiter:", ",preventLinks:!0,debug:!1};e.fn.rekaf=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.rekaf"):i.init.apply(this,arguments)}}(jQuery,window);